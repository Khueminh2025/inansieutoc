{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

    <!-- ·∫¢nh d·ªãch v·ª• -->
    <div class="bg-white p-4 rounded-xl shadow">
      {% if service.image %}
        <img src="{{ service.image.url }}" alt="{{ service.name }}" class="w-full h-auto object-contain rounded-lg">
      {% endif %}
    </div>

    <!-- Th√¥ng tin d·ªãch v·ª• -->
    <div class="bg-white p-6 rounded-xl shadow space-y-6">
      <h1 class="text-2xl font-bold text-red-600 uppercase">{{ service.name }}</h1>
      {% if service.description %}
        <p class="text-sm text-gray-600 italic">{{ service.description }}</p>
      {% endif %}

      <!-- Th√¥ng s·ªë c∆° b·∫£n -->
      {% if service.description %}
      <div>
        <h2 class="text-green-700 font-bold mb-2">TH√îNG S·ªê C∆† B·∫¢N</h2>
        <ul class="list-disc list-inside text-sm text-gray-700 space-y-1">
          {% for line in service.description.splitlines %}
            <li>{{ line }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <!-- Y√äU C·∫¶U C·ª¶A B·∫†N -->
      <div class="space-y-4">
        <h2 class="text-green-700 font-bold">Y√äU C·∫¶U C·ª¶A B·∫†N</h2>

        <!-- H√¨nh D·∫°ng -->
        {% if shapes.exists %}
        <div>
    <label class="block font-medium mb-1">H√¨nh D·∫°ng üü¢</label>
    {% if shapes|length < 4 %}
        <div class="flex flex-wrap gap-2">
            {% for shape in shapes %}
                <button type="button"
                        class="border border-green-500 px-4 py-2 rounded hover:bg-green-100">
                    {{ shape.name }}
                </button>
            {% endfor %}
        </div>
    {% else %}
        <select class="w-full border border-gray-300 rounded px-3 py-2">
            {% for shape in shapes %}
                <option value="{{ shape.id }}">{{ shape.name }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>
        {% endif %}

        <!-- Lo·∫°i Gi·∫•y -->
        {% if papers.exists %}
        <div>
    <label class="block font-medium mb-1">H√¨nh D·∫°ng üü¢</label>
    {% if papers|length < 4 %}
        <div class="flex flex-wrap gap-2">
            {% for paper in papers %}
                <button type="button"
                        class="border border-green-500 px-4 py-2 rounded hover:bg-green-100">
                    {{ paper.name }}
                </button>
            {% endfor %}
        </div>
    {% else %}
        <select class="w-full border border-gray-300 rounded px-3 py-2">
            {% for paper in papers %}
                <option value="{{ paper.id }}">{{ paper.name }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>
        {% endif %}

         <!-- Ch·∫•t li·ªáu -->
        {% if materials.exists %}
        <div>
    <label class="block font-medium mb-1">H√¨nh D·∫°ng üü¢</label>
    {% if materials|length < 4 %}
        <div class="flex flex-wrap gap-2">
            {% for material in materials %}
                <button type="button"
                        class="border border-green-500 px-4 py-2 rounded hover:bg-green-100">
                    {{ material.name }}
                </button>
            {% endfor %}
        </div>
    {% else %}
        <select class="w-full border border-gray-300 rounded px-3 py-2">
            {% for material in materials %}
                <option value="{{ material.id }}">{{ material.name }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>
        {% endif %}

         <!-- K√≠ch th∆∞·ªõc -->
        {% if sizes.exists %}
        <div>
    <label class="block font-medium mb-1">H√¨nh D·∫°ng üü¢</label>
    {% if sizes|length < 4 %}
        <div class="flex flex-wrap gap-2">
            {% for size in sizes %}
                <button type="button"
                        class="border border-green-500 px-4 py-2 rounded hover:bg-green-100">
                    {{ size.name }}
                </button>
            {% endfor %}
        </div>
    {% else %}
        <select class="w-full border border-gray-300 rounded px-3 py-2">
            {% for size in sizes %}
                <option value="{{ size.id }}">{{ size.name }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>
        {% endif %}

 <!-- C√°n m√†n -->
        {% if laminates.exists %}
        <div>
    <label class="block font-medium mb-1">H√¨nh D·∫°ng üü¢</label>
    {% if laminates|length < 4 %}
        <div class="flex flex-wrap gap-2">
            {% for laminate in laminates %}
                <button type="button"
                        class="border border-green-500 px-4 py-2 rounded hover:bg-green-100">
                    {{ laminate.name }}
                </button>
            {% endfor %}
        </div>
    {% else %}
        <select class="w-full border border-gray-300 rounded px-3 py-2">
            {% for laminate in laminates %}
                <option value="{{ laminate.id }}">{{ laminate.name }}</option>
            {% endfor %}
        </select>
    {% endif %}
</div>
        {% endif %}           

        <!-- N√∫t ƒë·∫∑t h√†ng -->
        <a href="{% url 'order_form' %}?service_slug={{ service.slug }}"
           class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 text-lg font-semibold w-full block text-center mt-4">
          ƒê·∫∂T H√ÄNG NGAY
        </a>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  function handleOtherInput(buttonsSelector, otherInputSelector) {
    document.querySelectorAll(buttonsSelector).forEach(function(btn) {
      btn.addEventListener('click', function() {
        if (btn.textContent.trim().toLowerCase() === 'kh√°c') {
          document.querySelector(otherInputSelector).classList.toggle('hidden');
          document.querySelector(otherInputSelector).focus();
        } else {
          document.querySelector(otherInputSelector).classList.add('hidden');
        }
      });
    });
  }

  handleOtherInput('.shape-btn', '#shape-other-input');
  handleOtherInput('.material-btn', '#material-other-input');
  handleOtherInput('.size-btn', '#size-other-input');
  handleOtherInput('.laminate-btn', '#laminate-other-input');
});
</script>
{% endblock %}
